function cov_5f9kb8678(){var path="/home/bamberg/sd-014-c-store-manager/models/salesModel.js";var hash="c05e59fcf02e985edc69aea250972ee0f90e9761";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/bamberg/sd-014-c-store-manager/models/salesModel.js",statementMap:{"0":{start:{line:1,column:19},end:{line:1,column:42}},"1":{start:{line:3,column:19},end:{line:3,column:39}},"2":{start:{line:4,column:20},end:{line:4,column:49}},"3":{start:{line:6,column:15},end:{line:19,column:1}},"4":{start:{line:7,column:18},end:{line:11,column:3}},"5":{start:{line:13,column:22},end:{line:16,column:5}},"6":{start:{line:13,column:67},end:{line:16,column:3}},"7":{start:{line:18,column:2},end:{line:18,column:21}},"8":{start:{line:21,column:16},end:{line:31,column:1}},"9":{start:{line:22,column:17},end:{line:28,column:3}},"10":{start:{line:30,column:2},end:{line:30,column:14}},"11":{start:{line:33,column:15},end:{line:39,column:1}},"12":{start:{line:34,column:20},end:{line:36,column:3}},"13":{start:{line:38,column:2},end:{line:38,column:26}},"14":{start:{line:41,column:13},end:{line:46,column:1}},"15":{start:{line:42,column:2},end:{line:45,column:4}},"16":{start:{line:48,column:15},end:{line:54,column:1}},"17":{start:{line:49,column:2},end:{line:53,column:4}},"18":{start:{line:56,column:15},end:{line:61,column:1}},"19":{start:{line:57,column:2},end:{line:60,column:4}},"20":{start:{line:63,column:0},end:{line:70,column:2}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:15},end:{line:6,column:16}},loc:{start:{line:6,column:27},end:{line:19,column:1}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:13,column:32},end:{line:13,column:33}},loc:{start:{line:13,column:67},end:{line:16,column:3}},line:13},"2":{name:"(anonymous_2)",decl:{start:{line:21,column:16},end:{line:21,column:17}},loc:{start:{line:21,column:34},end:{line:31,column:1}},line:21},"3":{name:"(anonymous_3)",decl:{start:{line:33,column:15},end:{line:33,column:16}},loc:{start:{line:33,column:27},end:{line:39,column:1}},line:33},"4":{name:"(anonymous_4)",decl:{start:{line:41,column:13},end:{line:41,column:14}},loc:{start:{line:41,column:52},end:{line:46,column:1}},line:41},"5":{name:"(anonymous_5)",decl:{start:{line:48,column:15},end:{line:48,column:16}},loc:{start:{line:48,column:57},end:{line:54,column:1}},line:48},"6":{name:"(anonymous_6)",decl:{start:{line:56,column:15},end:{line:56,column:16}},loc:{start:{line:56,column:33},end:{line:61,column:1}},line:56}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c05e59fcf02e985edc69aea250972ee0f90e9761"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_5f9kb8678=function(){return actualCoverage;};}return actualCoverage;}cov_5f9kb8678();const connection=(cov_5f9kb8678().s[0]++,require('./connection'));const salesTable=(cov_5f9kb8678().s[1]++,'StoreManager.sales');const joinedTable=(cov_5f9kb8678().s[2]++,'StoreManager.sales_products');cov_5f9kb8678().s[3]++;const getAll=async()=>{cov_5f9kb8678().f[0]++;const[sales]=(cov_5f9kb8678().s[4]++,await connection.execute(`SELECT sale_id, date, product_id, quantity FROM ${salesTable}
    JOIN ${joinedTable}
    ON (${salesTable}.id = ${joinedTable}.sale_id)`));const salesPretty=(cov_5f9kb8678().s[5]++,sales.map(({sale_id:saleId,...rest})=>{cov_5f9kb8678().f[1]++;cov_5f9kb8678().s[6]++;return{saleId,...rest};}));cov_5f9kb8678().s[7]++;return salesPretty;};cov_5f9kb8678().s[8]++;const getById=async saleId=>{cov_5f9kb8678().f[2]++;const[sale]=(cov_5f9kb8678().s[9]++,await connection.execute(`SELECT date, product_id, quantity FROM StoreManager.sales
    JOIN StoreManager.sales_products
    ON (StoreManager.sales.id = StoreManager.sales_products.sale_id)
    WHERE sale_id = ?`,[saleId]));cov_5f9kb8678().s[10]++;return sale;};cov_5f9kb8678().s[11]++;const create=async()=>{cov_5f9kb8678().f[3]++;const[newSale]=(cov_5f9kb8678().s[12]++,await connection.execute(`INSERT INTO ${salesTable} (date) VALUES (NOW())`));cov_5f9kb8678().s[13]++;return newSale.insertId;// a.k.a SaleId
};cov_5f9kb8678().s[14]++;const sell=async(saleId,productId,quantity)=>{cov_5f9kb8678().f[4]++;cov_5f9kb8678().s[15]++;await connection.execute(`INSERT INTO ${joinedTable} (sale_id, product_id, quantity) VALUES (?, ?, ?)`,[saleId,productId,quantity]);};cov_5f9kb8678().s[16]++;const update=async(saleId,productId,newQuantity)=>{cov_5f9kb8678().f[5]++;cov_5f9kb8678().s[17]++;await connection.execute(`UPDATE ${joinedTable} SET quantity = ?
    WHERE (sale_id = ? AND product_id = ?)`,[newQuantity,saleId,productId]);};cov_5f9kb8678().s[18]++;const remove=async saleId=>{cov_5f9kb8678().f[6]++;cov_5f9kb8678().s[19]++;await connection.execute(`DELETE FROM ${salesTable} WHERE id = ?`,[saleId]);};cov_5f9kb8678().s[20]++;module.exports={getAll,getById,create,sell,update,remove};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNhbGVzTW9kZWwuanMiXSwibmFtZXMiOlsiY29ubmVjdGlvbiIsInJlcXVpcmUiLCJzYWxlc1RhYmxlIiwiam9pbmVkVGFibGUiLCJnZXRBbGwiLCJzYWxlcyIsImV4ZWN1dGUiLCJzYWxlc1ByZXR0eSIsIm1hcCIsInNhbGVfaWQiLCJzYWxlSWQiLCJyZXN0IiwiZ2V0QnlJZCIsInNhbGUiLCJjcmVhdGUiLCJuZXdTYWxlIiwiaW5zZXJ0SWQiLCJzZWxsIiwicHJvZHVjdElkIiwicXVhbnRpdHkiLCJ1cGRhdGUiLCJuZXdRdWFudGl0eSIsInJlbW92ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJzNUZBZVk7eUZBZlosS0FBTUEsQ0FBQUEsVUFBVSx5QkFBR0MsT0FBTyxDQUFDLGNBQUQsQ0FBVixDQUFoQixDQUVBLEtBQU1DLENBQUFBLFVBQVUseUJBQUcsb0JBQUgsQ0FBaEIsQ0FDQSxLQUFNQyxDQUFBQSxXQUFXLHlCQUFHLDZCQUFILENBQWpCLEMsdUJBRUEsS0FBTUMsQ0FBQUEsTUFBTSxDQUFHLFNBQVksd0JBQ3pCLEtBQU0sQ0FBQ0MsS0FBRCwwQkFBVSxLQUFNTCxDQUFBQSxVQUFVLENBQUNNLE9BQVgsQ0FDbkIsbURBQWtESixVQUFXO0FBQ2xFLFdBQVdDLFdBQVk7QUFDdkIsVUFBVUQsVUFBVyxTQUFRQyxXQUFZLFdBSGpCLENBQWhCLENBQU4sQ0FNQSxLQUFNSSxDQUFBQSxXQUFXLHlCQUFHRixLQUFLLENBQUNHLEdBQU4sQ0FBVSxDQUFDLENBQUVDLE9BQU8sQ0FBRUMsTUFBWCxDQUFtQixHQUFHQyxJQUF0QixDQUFELEdBQW1DLHNEQUMvREQsTUFEK0QsQ0FFL0QsR0FBR0MsSUFGNEQsRUFHaEUsQ0FIbUIsQ0FBSCxDQUFqQixDQVB5Qix1QkFZekIsTUFBT0osQ0FBQUEsV0FBUCxDQUNELENBYkQsQyx1QkFlQSxLQUFNSyxDQUFBQSxPQUFPLENBQUcsS0FBT0YsQ0FBQUEsTUFBUCxFQUFrQix3QkFDaEMsS0FBTSxDQUFDRyxJQUFELDBCQUFTLEtBQU1iLENBQUFBLFVBQVUsQ0FBQ00sT0FBWCxDQUNsQjtBQUNMO0FBQ0E7QUFDQSxzQkFKdUIsQ0FLbkIsQ0FBQ0ksTUFBRCxDQUxtQixDQUFmLENBQU4sQ0FEZ0Msd0JBU2hDLE1BQU9HLENBQUFBLElBQVAsQ0FDRCxDQVZELEMsd0JBWUEsS0FBTUMsQ0FBQUEsTUFBTSxDQUFHLFNBQVksd0JBQ3pCLEtBQU0sQ0FBQ0MsT0FBRCwyQkFBWSxLQUFNZixDQUFBQSxVQUFVLENBQUNNLE9BQVgsQ0FDckIsZUFBY0osVUFBVyx3QkFESixDQUFsQixDQUFOLENBRHlCLHdCQUt6QixNQUFPYSxDQUFBQSxPQUFPLENBQUNDLFFBQWYsQ0FBeUI7QUFDMUIsQ0FORCxDLHdCQVFBLEtBQU1DLENBQUFBLElBQUksQ0FBRyxNQUFPUCxNQUFQLENBQWVRLFNBQWYsQ0FBMEJDLFFBQTFCLEdBQXVDLGdEQUNsRCxLQUFNbkIsQ0FBQUEsVUFBVSxDQUFDTSxPQUFYLENBQ0gsZUFBY0gsV0FBWSxtREFEdkIsQ0FFSixDQUFDTyxNQUFELENBQVNRLFNBQVQsQ0FBb0JDLFFBQXBCLENBRkksQ0FBTixDQUlELENBTEQsQyx3QkFPQSxLQUFNQyxDQUFBQSxNQUFNLENBQUcsTUFBT1YsTUFBUCxDQUFlUSxTQUFmLENBQTBCRyxXQUExQixHQUEwQyxnREFDdkQsS0FBTXJCLENBQUFBLFVBQVUsQ0FBQ00sT0FBWCxDQUNILFVBQVNILFdBQVk7QUFDMUIsMkNBRlEsQ0FHSixDQUFDa0IsV0FBRCxDQUFjWCxNQUFkLENBQXNCUSxTQUF0QixDQUhJLENBQU4sQ0FLRCxDQU5ELEMsd0JBUUEsS0FBTUksQ0FBQUEsTUFBTSxDQUFHLEtBQU9aLENBQUFBLE1BQVAsRUFBa0IsZ0RBQy9CLEtBQU1WLENBQUFBLFVBQVUsQ0FBQ00sT0FBWCxDQUNILGVBQWNKLFVBQVcsZUFEdEIsQ0FFSixDQUFDUSxNQUFELENBRkksQ0FBTixDQUlELENBTEQsQyx3QkFPQWEsTUFBTSxDQUFDQyxPQUFQLENBQWlCLENBQ2ZwQixNQURlLENBRWZRLE9BRmUsQ0FHZkUsTUFIZSxDQUlmRyxJQUplLENBS2ZHLE1BTGUsQ0FNZkUsTUFOZSxDQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNvbm5lY3Rpb24gPSByZXF1aXJlKCcuL2Nvbm5lY3Rpb24nKTtcblxuY29uc3Qgc2FsZXNUYWJsZSA9ICdTdG9yZU1hbmFnZXIuc2FsZXMnO1xuY29uc3Qgam9pbmVkVGFibGUgPSAnU3RvcmVNYW5hZ2VyLnNhbGVzX3Byb2R1Y3RzJztcblxuY29uc3QgZ2V0QWxsID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCBbc2FsZXNdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgIGBTRUxFQ1Qgc2FsZV9pZCwgZGF0ZSwgcHJvZHVjdF9pZCwgcXVhbnRpdHkgRlJPTSAke3NhbGVzVGFibGV9XG4gICAgSk9JTiAke2pvaW5lZFRhYmxlfVxuICAgIE9OICgke3NhbGVzVGFibGV9LmlkID0gJHtqb2luZWRUYWJsZX0uc2FsZV9pZClgLFxuICApO1xuXG4gIGNvbnN0IHNhbGVzUHJldHR5ID0gc2FsZXMubWFwKCh7IHNhbGVfaWQ6IHNhbGVJZCwgLi4ucmVzdCB9KSA9PiAoe1xuICAgIHNhbGVJZCxcbiAgICAuLi5yZXN0LFxuICB9KSk7XG5cbiAgcmV0dXJuIHNhbGVzUHJldHR5O1xufTtcblxuY29uc3QgZ2V0QnlJZCA9IGFzeW5jIChzYWxlSWQpID0+IHtcbiAgY29uc3QgW3NhbGVdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgIGBTRUxFQ1QgZGF0ZSwgcHJvZHVjdF9pZCwgcXVhbnRpdHkgRlJPTSBTdG9yZU1hbmFnZXIuc2FsZXNcbiAgICBKT0lOIFN0b3JlTWFuYWdlci5zYWxlc19wcm9kdWN0c1xuICAgIE9OIChTdG9yZU1hbmFnZXIuc2FsZXMuaWQgPSBTdG9yZU1hbmFnZXIuc2FsZXNfcHJvZHVjdHMuc2FsZV9pZClcbiAgICBXSEVSRSBzYWxlX2lkID0gP2AsXG4gICAgW3NhbGVJZF0sXG4gICk7XG5cbiAgcmV0dXJuIHNhbGU7XG59O1xuXG5jb25zdCBjcmVhdGUgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IFtuZXdTYWxlXSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZShcbiAgICBgSU5TRVJUIElOVE8gJHtzYWxlc1RhYmxlfSAoZGF0ZSkgVkFMVUVTIChOT1coKSlgLFxuICApO1xuXG4gIHJldHVybiBuZXdTYWxlLmluc2VydElkOyAvLyBhLmsuYSBTYWxlSWRcbn07XG5cbmNvbnN0IHNlbGwgPSBhc3luYyAoc2FsZUlkLCBwcm9kdWN0SWQsIHF1YW50aXR5KSA9PiB7XG4gIGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZShcbiAgICBgSU5TRVJUIElOVE8gJHtqb2luZWRUYWJsZX0gKHNhbGVfaWQsIHByb2R1Y3RfaWQsIHF1YW50aXR5KSBWQUxVRVMgKD8sID8sID8pYCxcbiAgICBbc2FsZUlkLCBwcm9kdWN0SWQsIHF1YW50aXR5XSxcbiAgKTtcbn07XG5cbmNvbnN0IHVwZGF0ZSA9IGFzeW5jIChzYWxlSWQsIHByb2R1Y3RJZCwgbmV3UXVhbnRpdHkpID0+IHtcbiAgYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgIGBVUERBVEUgJHtqb2luZWRUYWJsZX0gU0VUIHF1YW50aXR5ID0gP1xuICAgIFdIRVJFIChzYWxlX2lkID0gPyBBTkQgcHJvZHVjdF9pZCA9ID8pYCxcbiAgICBbbmV3UXVhbnRpdHksIHNhbGVJZCwgcHJvZHVjdElkXSxcbiAgKTtcbn07XG5cbmNvbnN0IHJlbW92ZSA9IGFzeW5jIChzYWxlSWQpID0+IHtcbiAgYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKFxuICAgIGBERUxFVEUgRlJPTSAke3NhbGVzVGFibGV9IFdIRVJFIGlkID0gP2AsXG4gICAgW3NhbGVJZF0sXG4gICk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZ2V0QWxsLFxuICBnZXRCeUlkLFxuICBjcmVhdGUsXG4gIHNlbGwsXG4gIHVwZGF0ZSxcbiAgcmVtb3ZlLFxufTsiXX0=